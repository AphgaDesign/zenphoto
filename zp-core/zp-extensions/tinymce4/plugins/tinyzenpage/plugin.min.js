tinymce.PluginManager.add('tinyzenpage', function(editor, url) {
	var w = window.innerWidth,
		h = window.innerHeight
	// Add a button that opens a window
	editor.addButton('tinyzenpage', {
		text: 'ZP',
		icon: false,
		onclick: function() {
			// Open window
			editor.windowManager.open({
				title: 'tinyZenpage',
				url: url + '/tinyzenpage.php',
				width: w - 100,
				height: h - 200,
				buttons: [{
						text: 'Close',
						onclick: 'close'
					}]
			});
		}
	});
	// Adds a menu item to the tools menu
	editor.addMenuItem('tinyZenpage', {
		text: 'tinyZenpage',
		context: 'tools',
		onclick: function() {
			// Open window with a specific url
			editor.windowManager.open({
				title: 'TinyMCE site',
				url: url + '/tinyzenpage.php',
				width: w - 100,
				height: h - 200,
				buttons: [{
						text: 'Close',
						onclick: 'close'
					}]
			});
		}
	});
});